/*! clientenv v0.2.2 | (c) 2013, falsandtru | MIT Licence */
(function(f,d,b,g){var e;function c(k,i,h,l,j){k.fn[j.name]=k[j.name]=function(){return a.apply(this,[k,i,h,l,j].concat([].slice.call(arguments)))};j.setProperties.call(k[j.name])}function a(n,l,h,o,m,k){var i=this;switch(true){default:i=i instanceof n?i:n[m.name];i=m.setProperties.call(i,null,null)}var j;j=n.extend(true,{id:0,gns:m.name,ns:o,userAgent:l.navigator.userAgent,hardware:true,platform:true,os:true,browser:true,font:{family:n("body")[0]?n("body").css("font-family"):"",symbol:true,lang:"en"},attribute:true,support:true,strict:{ie:false},not:true},k);j.nss={array:[m.name].concat(j.ns&&String(j.ns).split(".")||[])};n.extend(true,j=j.scope&&m.scope(j)||j,{nss:{name:j.ns||"",alias:m.alias?[m.alias].concat(j.nss.array.slice(1)).join("."):false,event:j.nss.array.join("."),data:j.nss.array.join("-"),class4html:j.nss.array.join("-")},option:k});m.registrate.call(i,n,l,h,o,m,j);return i}e={name:"clientenv",alias:"",ids:[],settings:[0],count:0,parseHTML:null,setAlias:function(h){e.alias=typeof h==="string"?h:e.alias;if(e.name!==e.alias&&!f[e.alias]){f[e.name][e.alias]=f.fn[e.name];f.fn[e.alias]=f[e.alias]=f.fn[e.name]}},setProperties:function(j,i){var h=this;if(h instanceof f||h===f[e.name]){h=h instanceof f&&i!==g?h.add(i):h;h[e.name]=f[e.name];h.addClass=function(p,o,q){var m,u,r,t,k,s;m=this[0]?this:f("html");u=e.settings[1];if(!p){return this}for(var l=0,n=p.split(/\s+/);p=n[l];l++){s=e.format.apply(this,[p,o]);r=s[0];t=s[1];k=q||t||e.reference.apply(this,[r,t]);if(this.is(r,t)){!u.not&&!k.indexOf("not-")||f(m).addClass(k)}else{if(t===g){continue}!u.not||f(m).addClass((k.indexOf("not-")?"not-":"")+k)}}return this};h.removeClass=function(p,o,q){var m,u,r,t,k,s;m=this[0]?this:f("html");u=e.settings[1];if(!p){return this}for(var l=0,n=p.split(/\s+/);p=n[l];l++){s=e.format.apply(this,[p,o]);r=s[0];t=s[1];k=q||t||e.reference.apply(this,[r,t]);if(this.is(r,t)){!u.not&&!k.indexOf("not-")||f(m).removeClass(k)}else{if(t===g){continue}!u.not||f(m).removeClass((k.indexOf("not-")?"not-":"")+k)}}return this};h.filter=function(l,k){return this.not(this.is(l,k)?"":"*")};h.is=function(q,p){var o,m,k=0;o=q.replace(/"|'/g,"").split(/\s*,\s*/);m=p===g||p==="name"?["name"]:p.replace(/"|'/g,"").split(/\s*,\s*/);for(var n=0,q;q=o[n];n++){for(var l=0,p;p=m[l];l++){p=e.format.apply(this,[q,p]);q=p[0];p=p[1];k+=e.reference.apply(this,[q,p])?1:0}}k=p!==g&&0===p.indexOf("not-")?!k:k;return Boolean(k)};h.data=function(){var k=f.extend(true,{userAgent:this.userAgent},this);delete k[0];return k};h.reset=function(k){1<e.settings.length&&e.settings.splice(1,1);f[e.name](k);return 1<e.settings.length?this:g}}return h},registrate:function(s,q,y,n,v,x){var l=this;x.id=1;v.ids.push(x.id);v.settings[x.id]=x;var H=x.userAgent.toLowerCase(),h={os:{},platform:{},hardware:{},browser:{},attribute:{},font:{}},o;for(var C in h){h[C]=s[v.name][C]}OS:{if(h.os&&(!x.option||!x.option.os&&!x.option.userAgent)){break OS}h.os={name:"",windows8:/Win(dows)? NT 6\.2/i.test(H)&&!~H.indexOf("arm"),windowsRT:/Win(dows)? NT 6\.2/i.test(H)&&~H.indexOf("arm"),windows7:/Win(dows)? NT 6\.1/i.test(H),windowsVista:/Win(dows)? NT 6\.0/i.test(H),windowsServer2003:/Win(dows)? NT 5\.2/i.test(H),windowsXP:/Win(dows)? (NT 5\.1|XP)/i.test(H),windowsME:/Win(dows)? (9x 4\.90|ME)/i.test(H),windows2000:/Win(dows)? (NT 5\.0|2000)/i.test(H),windows98:/Win(dows)? 98/i.test(H),windowsNT:/Win(dows)? NT([3-4]\.0| [^0-9]+[^.])/i.test(H),windows95:/Win(dows)? 95/i.test(H),"osx10.8":/Mac OS X 10[._]8/i.test(H),"osx10.7":/Mac OS X 10[._]7/i.test(H),"osx10.6":/Mac OS X 10[._]6/i.test(H),"osx10.5":/Mac OS X 10[._]5/i.test(H),"osx10.4":/Mac OS X 10[._]4/i.test(H),"osx10.3":/Mac OS X 10[._]3/i.test(H),"osx10.2":/Mac OS X 10[._]2/i.test(H),"osx10.1":/Mac OS X 10[._]1/i.test(H),"osx10.0":/Mac OS X 10[._]0/i.test(H),ios:~H.indexOf("iphone os")||~H.indexOf("like mac os x"),androidos:~H.indexOf("android"),otherOS:false};o=h.os;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.os.name){h.os.name="otherOS";h.os.otherOS=true}}PLATFORM:{if(h.platform&&(!x.option||!x.option.platform&&!x.option.userAgent)){break PLATFORM}h.platform={name:"",windows:~H.indexOf("windows"),mac:~H.indexOf("macintosh"),linux:~H.indexOf("x11"),android:~H.indexOf("android"),iphone:~H.indexOf("iphone"),ipad:~H.indexOf("ipad"),ipod:~H.indexOf("ipod"),windowsPhone:~H.indexOf("windows phone"),blackberry:~H.indexOf("blackberry"),wii:~H.indexOf("nintendo wii"),ds:~H.indexOf("nitro"),psp:~H.indexOf("psp"),ps2:~H.indexOf("ps2"),ps3:~H.indexOf("playstation 3"),otherPlatform:false};o=h.platform;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.platform.name){h.platform.name="otherPlatform";h.platform.otherPlatform=true}}HARDWARE:{if(h.hardware&&(!x.option||!x.option.hardware&&!x.option.userAgent)){break HARDWARE}h.hardware={name:"",pc:h.platform.windows||h.platform.mac,mobile:~H.indexOf("mobile"),tablet:~H.indexOf("tablet"),game:h.platform.wii||h.platform.ds||h.platform.psp||h.platform.ps2||h.platform.ps3,otherHardware:false};o=h.hardware;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.hardware.name){h.hardware.name="otherHardware";h.hardware.otherHardware=true}}BROWSER:{if(h.browser&&(!x.option||!x.option.browser&&!x.option.userAgent)){break BROWSER}h.browser={name:"",version:(H.match(/(?:chrome|firefox|safari|msie|rv|opera(?:\/.+ version)?|version)[\/:\s]([\d.]+)/)||[])[1],chrome:~H.indexOf("chrome"),safari:~H.indexOf("safari")&&!~H.indexOf("chrome"),opera:~H.indexOf("opera")&&!h.platform.wii&&!h.platform.ds,firefox:~H.indexOf("firefox"),mozilla:~H.indexOf("mozilla")&&!~H.indexOf("compatible")&&!~H.indexOf("webkit")&&!~H.indexOf("firefox"),lunascape:~H.indexOf("lunascape"),sleipnir:~H.indexOf("sleipnir"),ie:~H.indexOf("msie")&&!~H.indexOf("opera")||~H.indexOf("trident")&&~H.indexOf("rv:"),otherBrowser:false};for(var C=5,k;C<=15;C++){h.browser["ie"+C]=Boolean(h.browser.ie&&0===h.browser.version.indexOf(C))}if(x.strict.ie){h.browser.ie=h.browser.ie&&/^\d{2}\./.test(h.browser.version)||Boolean(s("<!--[if IE]><wbr><![endif]-->").length&&s("<!--[if IE]><wbr><![endif]-->")[0].nodeType===1);for(var C=5,k;C<=9;C++){k=s("<!--[if IE "+C+"]><wbr><![endif]-->");h.browser["ie"+C]=Boolean(k.length&&k[0].nodeType===1);k=null}}o=h.browser;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.browser.name){h.browser.name="otherBrowser";h.browser.otherBrowser=true}}ATTRIBUTE:{if(h.attribute&&(!x.option||!x.option.attribute&&!x.option.userAgent)){break ATTRIBUTE}h.attribute={name:"",touch:!!~H.indexOf("touch")||h.hardware.tablet||h.platform.iphone||h.platform.ipad||(h.platform.android&&h.hardware.mobile),bot:/Bot\W|Robot|Crawler|Spider/i.test(H)}}FONT:{if(h.font&&(!x.option||!x.option.font&&!x.option.userAgent)){break FONT}if(!x.font||!s("body").length){break FONT}var r,m,k,F,p,t,K,A,J;p=["monospace","fantasy","cursive","sans-serif","serif"];F="font-size: 72px !important; font-style: normal !important; font-weight: normal !important; font-variant: normal !important; letter-spacing: normal !important; line-height: normal !important; display: block !important; visibility: hidden !important; position: absolute !important; top: -9999px !important; left: -9999px !important; width: auto !important; height: auto !important; ";K="alphanumericmmmmmmmmm1234567890";A=x.font.symbol?"_!#$&:;@+-*/%=^\\(){}[]<>":"";J={en:"environment",ja:"環境　かんきょう　カンキョウ"};t=K+A;for(var C=0,u=x.font.lang.split(/\s*,\s*/),I;I=u[C];C++){if(I in J){t+=J[I]}}m=[];m[0]=s("<pre/>").text(t);m[1]=s("<pre/>").text(t);r=s("body");r.append(m[0],m[1]);for(var C=0;C+1<p.length;C++){m[0].attr("style","font-family: "+p.slice(C+0).join(", ")+" !important; "+F);m[1].attr("style","font-family: "+p.slice(C+1).join(", ")+" !important; "+F);if(m[0][0].offsetWidth!==m[1][0].offsetWidth||m[0][0].offsetHeight!==m[1][0].offsetHeight){}else{p.splice(C--,1)}}m[0].attr("style","font-family: "+p.join(", ")+" !important; "+F);m[1].attr("style","font-family: "+p.slice(1<p.length?1:0).join(", ")+" !important; "+F);F=p.join(", ")+" !important; "+F;p=x.font.family.split(/\s*,\s*/);h.font={support:"",support4style:"",notsupport:"",notsupport4style:""};k=s("<pre/>").text(t);r.append(k);for(var C=0,w,G;G=p[C];C++){w=G.replace(/"|'/g,"");for(var B=0,E=m.length,z,D;z=m[B];B++){k.attr("style","font-family: "+G+", "+F.slice(!B?0:F.indexOf(", ")+2));if(z[0].offsetWidth!==k[0].offsetWidth||z[0].offsetHeight!==k[0].offsetHeight||h.os.androidos||h.os.ios){h.font[w]=true;h.font.support+=","+w;h.font.support4style+=","+G;break}else{if(B===E-1){h.font[w]=false;h.font.notsupport+=","+w;h.font.notsupport4style+=","+G}}}}m[0].remove();m[0]=null;m[1].remove();m[1]=null;k.remove();k=null;h.font.support=h.font.support.slice(1);h.font.notsupport=h.font.notsupport.slice(1);h.font.support4style=h.font.support4style.slice(1);h.font.notsupport4style=h.font.notsupport4style.slice(1);h.font.name=h.font.support.split(/\s*,\s*/,2)[0]}SUPPORT:{if(!h.support){break SUPPORT}h.support=s.support}s.extend(true,l,h)},format:function(k,j){if(k in this&&j){j=j?j.replace(/(\S+):(\S+)/,"$2-$1"):j;j=j?j.replace(/(\w+)-(not-)/,"$2-$1"):j}else{if(k in this){}else{k=k?k.replace(/(\S+):(\S+)/,"$2-$1"):k;k=k?k.replace(/(\w+)-(not-)/,"$2-$1"):k;j=[k.split(/(?:not|lte|lt|gte|gt)-/).pop()][0];for(var h in this){if(typeof this[h]!=="object"){continue}if(j in this[h]){j=k;k=h}}}}return[k,j]},reference:function(p,o){var k,n,j=[g,g],h;k=o===g?[o]:o.replace(/(not|)-?(lte|lt|gte|gt|)-?(\S+)/,"$3,$2,$1").split(",");k[2]=k[2]==="not"?false:true;switch(true){case !o||!~o.indexOf("-"):o=o?o:"name";if(this[p]&&o in this[p]){h=this[p][o]}else{h=g}return k[2]?h:!h;break;case p==="os"&&!k[0].indexOf("windows"):n=["windows8","windowsRT","windows7","windowsVista","windowsServer2003","windowsXP","windowsME","windows2000","windows98","windowsNT","windows95"];break;case p==="os"&&!k[0].indexOf("osx"):n=["osx10.8","osx10.7","osx10.6","osx10.5","osx10.4","osx10.3","osx10.2","osx10.1","osx10.0"];break;case p==="browser"&&!k[0].indexOf("ie"):n=["ie15","ie14","ie13","ie12","ie11","ie10","ie9","ie8","ie7","ie6","ie5"];break;default:return g}for(var l=0,m;m=n[l];l++){if(this[p]["name"]===m){j[0]=l}if(k[0]===m){j[1]=l}}if(g in j){return g}switch(k[1]){case"gt":h=j[0]<j[1];break;case"gte":h=j[0]<=j[1];break;case"lt":h=j[0]>j[1];break;case"lte":h=j[0]>=j[1];break;default:return g}return k[2]?h:!h}};c.apply(this,[].slice.call(arguments).concat([e]))})(jQuery,window,document,void 0);
