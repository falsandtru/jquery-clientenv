/*
 * 
 * clientenv
 * 
 * ---
 * @Copyright(c) 2013, falsandtru
 * @license MIT  http://opensource.org/licenses/mit-license.php  http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license
 * @version 0.1.10
 * @updated 2013/09/15
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(g){var s=window,n=void 0,f=["settings"];g.fn.clientenv=g.clientenv=function(t){function v(d){l&&l.test(2,1,0,"plugin register");l&&l.test("2.1",1,0,"variable");var a=d.userAgent.toLowerCase(),b={os:{},platform:{},hardware:{},browser:{},attribute:{},font:{}},c;l&&l.test("2.2",1,0,"os");if(!f[1]||!f[1].response.os||d.options&&d.options.os){b.os={name:"",windows8:/Win(dows )?NT 6\.2/i.test(a)&&0>a.indexOf("arm"),windowsRT:/Win(dows )?NT 6\.2/i.test(a)&&-1<a.indexOf("arm"),windows7:/Win(dows )?NT 6\.1/i.test(a),
windowsVista:/Win(dows )?NT 6\.0/i.test(a),windowsServer2003:/Win(dows )?NT 5\.2/i.test(a),windowsXP:/Win(dows )?(NT 5\.1|XP)/i.test(a),windowsME:/Win(dows )?(9x 4\.90|ME)/i.test(a),windows2000:/Win(dows )?(NT 5\.0|2000)/i.test(a),windows98:/Win(dows )?98/i.test(a),windowsNT:/Win(dows )?NT( [3-4]\.0| [^0-9]+[^.])/i.test(a),windows95:/Win(dows )?95/i.test(a),"osx10.8":/Mac OS X 10[._]8/i.test(a),"osx10.7":/Mac OS X 10[._]7/i.test(a),"osx10.6":/Mac OS X 10[._]6/i.test(a),"osx10.5":/Mac OS X 10[._]5/i.test(a),
"osx10.4":/Mac OS X 10[._]4/i.test(a),"osx10.3":/Mac OS X 10[._]3/i.test(a),"osx10.2":/Mac OS X 10[._]2/i.test(a),"osx10.1":/Mac OS X 10[._]1/i.test(a),"osx10.0":/Mac OS X 10[._]0/i.test(a),ios:-1<a.indexOf("iphone os")||-1<a.indexOf("like mac OS x"),androidos:-1<a.indexOf("android"),otherOS:!1};c=b.os;for(var e in c)c[e]&&"name"!==e&&(c.name=e);b.os.name||(b.os.name="otherOS",b.os.otherOS=!0)}else g.extend(!0,b.os,f[1].response.os);l&&l.test("2.3",1,0,"platform");if(!f[1]||!f[1].response.platform||
d.options&&d.options.platform){b.platform={name:"",windows:-1<a.indexOf("windows"),mac:-1<a.indexOf("macintosh"),linux:-1<a.indexOf("x11"),android:-1<a.indexOf("android"),iphone:-1<a.indexOf("iphone"),ipad:-1<a.indexOf("ipad"),ipod:-1<a.indexOf("ipod"),windowsPhone:-1<a.indexOf("windows phone"),blackberry:-1<a.indexOf("blackberry"),wii:-1<a.indexOf("nintendo wii"),ds:-1<a.indexOf("nitro"),psp:-1<a.indexOf("psp"),ps2:-1<a.indexOf("ps2"),ps3:-1<a.indexOf("playstation 3"),otherPlatform:!1};c=b.platform;
for(e in c)c[e]&&"name"!==e&&(c.name=e);b.platform.name||(b.platform.name="otherPlatform",b.platform.otherPlatform=!0)}else g.extend(!0,b.platform,f[1].response.platform);l&&l.test("2.4",1,0,"hardware");if(!f[1]||!f[1].response.hardware||d.options&&d.options.hardware){b.hardware={name:"",pc:b.platform.windows||b.platform.mac,mobile:-1<a.indexOf("mobile"),tablet:-1<a.indexOf("tablet"),game:b.platform.wii||b.platform.ds||b.platform.psp||b.platform.ps2||b.platform.ps3,otherHardware:!1};c=b.hardware;
for(e in c)c[e]&&"name"!==e&&(c.name=e);b.hardware.name||(b.hardware.name="otherHardware",b.hardware.otherHardware=!0)}else g.extend(!0,b.hardware,f[1].response.hardware);l&&l.test("2.5",1,0,"browser");if(!f[1]||!f[1].response.browser||d.options&&d.options.browser){b.browser={name:"",version:(a.match(/(?:chrome|firefox|safari|msie|opera(?:\/.+ version)?|version)[\/:\s]([\d.]+)/)||[])[1],chrome:-1<a.indexOf("chrome"),safari:-1<a.indexOf("safari")&&0>a.indexOf("chrome"),opera:-1<a.indexOf("opera")&&
!b.platform.wii&&!b.platform.ds,firefox:-1<a.indexOf("firefox"),mozilla:-1<a.indexOf("mozilla")&&0>a.indexOf("compatible")&&0>a.indexOf("webkit")&&0>a.indexOf("firefox"),lunascape:-1<a.indexOf("lunascape"),sleipnir:-1<a.indexOf("sleipnir"),ie:-1<a.indexOf("msie")&&0>a.indexOf("opera"),otherBrowser:!1};e=5;for(var h;10>=e;e++)b.browser["ie"+e]=Boolean(b.browser.ie&&0===b.browser.version.indexOf(e)&&0>a.indexOf("opera"));if(b.browser.ie&&d.strict.ie)for(b.browser.ie=Boolean(g("\x3c!--[if IE ]><wbr><![endif]--\x3e").length&&
1===g("\x3c!--[if IE ]><wbr><![endif]--\x3e")[0].nodeType),e=5;9>=e;e++)h=g("\x3c!--[if IE "+e+"]><wbr><![endif]--\x3e"),b.browser["ie"+e]=Boolean(h.length&&1===h[0].nodeType);c=b.browser;for(e in c)c[e]&&"name"!==e&&(c.name=e);b.browser.name||(b.browser.name="otherBrowser",b.browser.otherBrowser=!0)}else g.extend(!0,b.browser,f[1].response.browser);l&&l.test("2.6",1,0,"attribute");!f[1]||!f[1].response.attribute||d.options&&d.options.attribute?b.attribute={name:"",touch:-1<a.indexOf("touch")||b.hardware.tablet||
b.platform.iphone||b.platform.ipad||b.platform.android&&b.hardware.mobile,bot:/Bot\W|Robot|Crawler|Spider/i.test(a)}:g.extend(!0,b.attribute,f[1].response.attribute);l&&l.test("2.7",1,0,"font");if(f[1]&&f[1].response.font&&(!d.options||!d.options.font))g.extend(!0,b.font,f[1].response.font);else if(d.font&&g("body").length){var m,k;c=["monospace","fantasy","cursive","sans-serif","serif"];a="font-size: 72px !important; font-style: normal !important; font-weight: normal !important; font-variant: normal !important; letter-spacing: normal !important; line-height: normal !important; display: block !important; visibility: hidden !important; position: absolute !important; top: -9999px !important; left: -9999px !important; width: auto !important; height: auto !important; ";
e=d.font.symbol?"_!#$&:;@+-*/%=^\\(){}[]<>":"";k={en:"environment",ja:"\u74b0\u5883\u3000\u304b\u3093\u304d\u3087\u3046\u3000\u30ab\u30f3\u30ad\u30e7\u30a6"};h="alphanumericmmmmmmmmm1234567890"+e;e=0;m=d.font.lang.split(/\s*,\s*/);for(var n;n=m[e];e++)n in k&&(h+=k[n]);k=[];k[0]=g("<pre/>").text(h);k[1]=g("<pre/>").text(h);m=g("body");m.append(k[0],k[1]);for(e=0;e+1<c.length;e++)k[0].attr("style","font-family: "+c.slice(e+0).join(", ")+" !important; "+a),k[1].attr("style","font-family: "+c.slice(e+
1).join(", ")+" !important; "+a),k[0][0].offsetWidth===k[1][0].offsetWidth&&k[0][0].offsetHeight===k[1][0].offsetHeight&&c.splice(e--,1);k[0].attr("style","font-family: "+c.join(", ")+" !important; "+a);k[1].attr("style","font-family: "+c.slice(1<c.length?1:0).join(", ")+" !important; "+a);a=c.join(", ")+" !important; "+a;c=d.font.family.split(/\s*,\s*/);b.font={support:"",support4style:"",notsupport:"",notsupport4style:""};h=g("<pre/>").text(h);m.append(h);for(e=0;n=c[e];e++){m=n.replace(/"|'/g,
"");for(var p=0,r=k.length,q;q=k[p];p++)if(h.attr("style","font-family: "+n+", "+a.slice(p?a.indexOf(", ")+2:0)),q[0].offsetWidth!==h[0].offsetWidth||q[0].offsetHeight!==h[0].offsetHeight||b.os.androidos||b.os.ios){b.font[m]=!0;b.font.support+=","+m;b.font.support4style+=","+n;break}else p===r-1&&(b.font[m]=!1,b.font.notsupport+=","+m,b.font.notsupport4style+=","+n)}k[0].remove();k[0]=null;k[1].remove();k[1]=null;h.remove();b.font.support=b.font.support.slice(1);b.font.notsupport=b.font.notsupport.slice(1);
b.font.support4style=b.font.support4style.slice(1);b.font.notsupport4style=b.font.notsupport4style.slice(1);b.font.name=b.font.support.split(/\s*,\s*/,2)[0]}l&&l.test("2.8",1,0,"support");b.support&&(b.support=g.support);g.extend(!0,d.response,b)}function w(d,a,b){var c=f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;c&&c.start();c&&c.test(1,1,arguments,"addClass()");var e,h,m;if(!this[0]||!d)return c&&c.end(),this;c&&c.test(2,1,0,"for");c&&c.test("*",1,0,"for in");for(var k=0,
l=d.split(/\s+/);d=l[k];k++){c&&c.test("*",1,d,"for start");result=r.apply(this,[d,a]);c&&c.test("++",1,result,"fomat");e=result[0];h=result[1];m=b||h||q.apply(this,[e,h]);c&&c.test("++",1,[e,h],"is( fproperty, fquery )");if(this.is(e,h))c&&c.test("++",1,m,"true"),!this.not&&!m.indexOf("not-")||g(this[0]).addClass(m);else{c&&c.test("++",1,m,"false");if(h===n){c&&c.test("/",1,0,"for end");continue}!this.not||g(this[0]).addClass((m.indexOf("not-")?"not-":"")+m)}c&&c.test("/",1,0,"for end")}c&&c.test("/",
1,0,"for out");c&&c.end();return this}function x(d,a,b){var c=f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;c&&c.start();c&&c.test(1,1,arguments,"removeClass()");var e,h,m;if(!this[0]||!d)return c&&c.end(),this;c&&c.test(2,1,0,"for");c&&c.test("*",1,0,"for in");for(var k=0,l=d.split(/\s+/);d=l[k];k++){c&&c.test("*",1,d,"for start");result=r.apply(this,[d,a]);c&&c.test("++",1,result,"fomat");e=result[0];h=result[1];m=b||h||q.apply(this,[e,h]);c&&c.test("++",1,[e,h],"is( fproperty, fquery )");
if(this.is(e,h))c&&c.test("++",1,m,"true"),!this.not&&!m.indexOf("not-")||g(this[0]).removeClass(m);else{c&&c.test("++",1,m,"false");if(h===n){c&&c.test("/",1,0,"for end");continue}!this.not||g(this[0]).removeClass((m.indexOf("not-")?"not-":"")+m)}c&&c.test("/",1,0,"for end")}c&&c.test("/",1,0,"for out");c&&c.end();return this}function y(d,a){var b=f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;b&&b.start();b&&b.test(1,1,arguments,"filter()");this.is(d,a)||delete this[0];b&&b.end();
return this}function z(d,a){var b=f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;b&&b.start();b&&b.test(1,1,arguments,"is()");var c,e,h=0;c=d.replace(/"|'/g,"").split(/\s*,\s*/);e=a===n||"name"===a?["name"]:a.replace(/"|'/g,"").split(/\s*,\s*/);b&&b.test("*",1,0,"for in");for(var g=0;(d=c[g])&&this[0];g++)for(var k=0;a=e[k];k++)b&&b.test("*",1,[d,a],"for start"),a=r.apply(this,[d,a]),b&&b.test("++",1,a,"format"),d=a[0],a=a[1],b&&b.test("++",1,h,"reference"),h+=q.apply(this,[d,
a])?1:0,b&&b.test("/",1,h,"for end");b&&b.test("/",1,0,"for out");h=a!==n&&0===a.indexOf("not-")?!h:h;b&&b.end();return Boolean(h)}function r(d,a){var b=f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;b&&b.start();b&&b.test(1,1,arguments,"format()");if(d in this&&a)a=(a=a?a.replace(/(\S+):(\S+)/,"$2-$1"):a)?a.replace(/(\w+)-(not-)/,"$2-$1"):a;else if(!(d in this)){d=(d=d?d.replace(/(\S+):(\S+)/,"$2-$1"):d)?d.replace(/(\w+)-(not-)/,"$2-$1"):d;a=d.split(/(?:not|lte|lt|gte|gt)-/).pop();
for(var c in this)"object"===typeof this[c]&&a in this[c]&&(a=d,d=c)}b&&b.end();return[d,a]}function q(d,a){var b,c,e=[n,n];b=a===n?[a]:a.replace(/(not|)-?(lte|lt|gte|gt|)-?(\S+)/,"$3,$2,$1").split(",");b[2]="not"===b[2]?!1:!0;switch(!0){case !a||0>a.indexOf("-"):return a=a?a:"name",c=this[d]&&a in this[d]?this[d][a]:n,b[2]?c:!c;case "os"===d&&!b[0].indexOf("windows"):c="windows8 windowsRT windows7 windowsVista windowsServer2003 windowsXP windowsME windows2000 windows98 windowsNT windows95".split(" ");
break;case "os"===d&&!b[0].indexOf("osx"):c="osx10.8 osx10.7 osx10.6 osx10.5 osx10.4 osx10.3 osx10.2 osx10.1 osx10.0".split(" ");break;case "browser"===d&&!b[0].indexOf("ie"):c="ie10 ie9 ie8 ie7 ie6 ie5".split(" ");break;default:return n}for(var f=0,g;g=c[f];f++)this[d].name===g&&(e[0]=f),b[0]===g&&(e[1]=f);if(n in e)return n;switch(b[1]){case "gt":c=e[0]<e[1];break;case "gte":c=e[0]<=e[1];break;case "lt":c=e[0]>e[1];break;case "lte":c=e[0]>=e[1];break;default:return n}return b[2]?c:!c}function A(){var d=
f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;d&&d.start();d&&d.test(1,1,arguments,"data()");var a=g.extend(!0,{userAgent:this.userAgent},this);delete a[0];d&&d.test(2,1,a,"response");d&&d.end();return a}function B(d){var a=f[1].validate?f[1].validate.clone({name:"jquery.clientenv.js"}):!1;a&&a.start();a&&a.test(1,1,arguments,"reset()");1<f.length&&f.splice(1,1);clientenv(d);a&&a.end();return 1<f.length?this:n}if("function"===typeof this||this===s)return arguments.callee.apply(g("html"),
arguments);var l=window.validator instanceof Object?window.validator.clone({name:"jquery.clientenv.js",base:!0}):!1;l&&l.start();l&&l.test("++",1,0,"clientenv()");var p={id:0,gns:"clientenv",ns:n,userAgent:s.navigator.userAgent,hardware:!0,platform:!0,os:!0,browser:!0,font:{family:g("body")[0]?g("body").css("font-family"):"",symbol:!0,lang:"en"},attribute:!0,support:!0,strict:{ie:!1},not:!0,options:t},p=g.extend(!0,{},p,t),u=[p.gns].concat(p.ns||[]);1===f.length||arguments.length?(p.id=1,g.extend(!0,
p,{nss:{class4html:u.join("-"),array:u},response:{0:this[0],not:p.not,userAgent:p.userAgent,clientenv:arguments.callee,addClass:w,removeClass:x,filter:y,is:z,data:A,reset:B,end:function(){return g(this[0])}},validate:l}),v(p),f[1]instanceof Object||f.splice(1,1,{}),g.extend(!0,f[1],p),g.extend(!0,g.clientenv,f[1].response)):f[1].response[0]=this[0];g.clientenv[0]=document.documentElement;l&&l.end();return 1<f.length?f[1].response:n}})(jQuery);
