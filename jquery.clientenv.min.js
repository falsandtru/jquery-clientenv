/*
 * 
 * clientenv
 * 
 * ---
 * @Copyright(c) 2013, falsandtru
 * @license MIT  http://opensource.org/licenses/mit-license.php  http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license
 * @version 0.2.0
 * @updated 2014/02/08
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(l,t,u,m){function s(d,a,b,n,e,h){var c=this;switch(!0){default:c=c instanceof d?c:d[e.name],c=e.setProperties.call(c,null,null)}var k;k=d.extend(!0,{id:0,gns:e.name,ns:n,userAgent:a.navigator.userAgent,hardware:!0,platform:!0,os:!0,browser:!0,font:{family:d("body")[0]?d("body").css("font-family"):"",symbol:!0,lang:"en"},attribute:!0,support:!0,strict:{ie:!1},not:!0},h);k.nss={array:[e.name].concat(k.ns&&String(k.ns).split(".")||[])};d.extend(!0,k=k.scope&&e.scope(k)||k,{nss:{name:k.ns||
"",alias:e.alias?[e.alias].concat(k.nss.array.slice(1)).join("."):!1,event:k.nss.array.join("."),data:k.nss.array.join("-"),class4html:k.nss.array.join("-")},option:h});e.registrate.call(c,d,a,b,n,e,k);return c}var f;f={name:"clientenv",alias:"",ids:[],settings:[0],count:0,parseHTML:null,setAlias:function(d){f.alias="string"===typeof d?d:f.alias;f.name===f.alias||l[f.alias]||(l[f.name][f.alias]=l.fn[f.name],l.fn[f.alias]=l[f.alias]=l.fn[f.name])},setProperties:function(d,a){var b=this;if(b instanceof
l||b===l[f.name])b=b instanceof l&&a!==m?b.add(a):b,b[f.name]=l[f.name],b.addClass=function(a,b,d){var c,k,g,p;c=this[0]?this:l("html");k=f.settings[1];if(!a)return this;for(var q=0,r=a.split(/\s+/);a=r[q];q++)g=f.format.apply(this,[a,b]),a=g[0],g=g[1],p=d||g||f.reference.apply(this,[a,g]),this.is(a,g)?!k.not&&!p.indexOf("not-")||l(c).addClass(p):g===m||k.not&&l(c).addClass((p.indexOf("not-")?"not-":"")+p);return this},b.removeClass=function(a,b,d){var c,k,g,p;c=this[0]?this:l("html");k=f.settings[1];
if(!a)return this;for(var q=0,r=a.split(/\s+/);a=r[q];q++)g=f.format.apply(this,[a,b]),a=g[0],g=g[1],p=d||g||f.reference.apply(this,[a,g]),this.is(a,g)?!k.not&&!p.indexOf("not-")||l(c).removeClass(p):g===m||k.not&&l(c).removeClass((p.indexOf("not-")?"not-":"")+p);return this},b.filter=function(a,b){return this.not(this.is(a,b)?"":"*")},b.is=function(a,b){var d,c,k=0;d=a.replace(/"|'/g,"").split(/\s*,\s*/);c=b===m||"name"===b?["name"]:b.replace(/"|'/g,"").split(/\s*,\s*/);for(var g=0;a=d[g];g++)for(var p=
0;b=c[p];p++)b=f.format.apply(this,[a,b]),a=b[0],b=b[1],k+=f.reference.apply(this,[a,b])?1:0;k=b!==m&&0===b.indexOf("not-")?!k:k;return Boolean(k)},b.data=function(){var a=l.extend(!0,{userAgent:this.userAgent},this);delete a[0];return a},b.reset=function(a){1<f.settings.length&&f.settings.splice(1,1);l[f.name](a);return 1<f.settings.length?this:m};return b},registrate:function(d,a,b,n,e,h){h.id=1;e.ids.push(h.id);e.settings[h.id]=h;b=h.userAgent.toLowerCase();a={os:{},platform:{},hardware:{},browser:{},
attribute:{},font:{}};for(var c in a)a[c]=d[e.name][c];if(!a.os||h.option&&(h.option.os||h.option.userAgent)){a.os={name:"",windows8:/Win(dows )?NT 6\.2/i.test(b)&&0>b.indexOf("arm"),windowsRT:/Win(dows )?NT 6\.2/i.test(b)&&-1<b.indexOf("arm"),windows7:/Win(dows )?NT 6\.1/i.test(b),windowsVista:/Win(dows )?NT 6\.0/i.test(b),windowsServer2003:/Win(dows )?NT 5\.2/i.test(b),windowsXP:/Win(dows )?(NT 5\.1|XP)/i.test(b),windowsME:/Win(dows )?(9x 4\.90|ME)/i.test(b),windows2000:/Win(dows )?(NT 5\.0|2000)/i.test(b),
windows98:/Win(dows )?98/i.test(b),windowsNT:/Win(dows )?NT( [3-4]\.0| [^0-9]+[^.])/i.test(b),windows95:/Win(dows )?95/i.test(b),"osx10.8":/Mac OS X 10[._]8/i.test(b),"osx10.7":/Mac OS X 10[._]7/i.test(b),"osx10.6":/Mac OS X 10[._]6/i.test(b),"osx10.5":/Mac OS X 10[._]5/i.test(b),"osx10.4":/Mac OS X 10[._]4/i.test(b),"osx10.3":/Mac OS X 10[._]3/i.test(b),"osx10.2":/Mac OS X 10[._]2/i.test(b),"osx10.1":/Mac OS X 10[._]1/i.test(b),"osx10.0":/Mac OS X 10[._]0/i.test(b),ios:-1<b.indexOf("iphone os")||
-1<b.indexOf("like mac OS x"),androidos:-1<b.indexOf("android"),otherOS:!1};e=a.os;for(c in e)e[c]&&"name"!==c&&(e.name=c);a.os.name||(a.os.name="otherOS",a.os.otherOS=!0)}if(!a.platform||h.option&&(h.option.platform||h.option.userAgent)){a.platform={name:"",windows:-1<b.indexOf("windows"),mac:-1<b.indexOf("macintosh"),linux:-1<b.indexOf("x11"),android:-1<b.indexOf("android"),iphone:-1<b.indexOf("iphone"),ipad:-1<b.indexOf("ipad"),ipod:-1<b.indexOf("ipod"),windowsPhone:-1<b.indexOf("windows phone"),
blackberry:-1<b.indexOf("blackberry"),wii:-1<b.indexOf("nintendo wii"),ds:-1<b.indexOf("nitro"),psp:-1<b.indexOf("psp"),ps2:-1<b.indexOf("ps2"),ps3:-1<b.indexOf("playstation 3"),otherPlatform:!1};e=a.platform;for(c in e)e[c]&&"name"!==c&&(e.name=c);a.platform.name||(a.platform.name="otherPlatform",a.platform.otherPlatform=!0)}if(!a.hardware||h.option&&(h.option.hardware||h.option.userAgent)){a.hardware={name:"",pc:a.platform.windows||a.platform.mac,mobile:-1<b.indexOf("mobile"),tablet:-1<b.indexOf("tablet"),
game:a.platform.wii||a.platform.ds||a.platform.psp||a.platform.ps2||a.platform.ps3,otherHardware:!1};e=a.hardware;for(c in e)e[c]&&"name"!==c&&(e.name=c);a.hardware.name||(a.hardware.name="otherHardware",a.hardware.otherHardware=!0)}if(!a.browser||h.option&&(h.option.browser||h.option.userAgent)){a.browser={name:"",version:(b.match(/(?:chrome|firefox|safari|msie|rv|opera(?:\/.+ version)?|version)[\/:\s]([\d.]+)/)||[])[1],chrome:-1<b.indexOf("chrome"),safari:-1<b.indexOf("safari")&&0>b.indexOf("chrome"),
opera:-1<b.indexOf("opera")&&!a.platform.wii&&!a.platform.ds,firefox:-1<b.indexOf("firefox"),mozilla:-1<b.indexOf("mozilla")&&0>b.indexOf("compatible")&&0>b.indexOf("webkit")&&0>b.indexOf("firefox"),lunascape:-1<b.indexOf("lunascape"),sleipnir:-1<b.indexOf("sleipnir"),ie:-1<b.indexOf("msie")&&0>b.indexOf("opera")||-1<b.indexOf("trident")&&-1<b.indexOf("rv:"),otherBrowser:!1};for(c=5;15>=c;c++)a.browser["ie"+c]=Boolean(a.browser.ie&&0===a.browser.version.indexOf(c));if(h.strict.ie)for(a.browser.ie=
a.browser.ie&&/^\d{2}\./.test(a.browser.version)||Boolean(d("\x3c!--[if IE ]><wbr><![endif]--\x3e").length&&1===d("\x3c!--[if IE ]><wbr><![endif]--\x3e")[0].nodeType),c=5;9>=c;c++)n=d("\x3c!--[if IE "+c+"]><wbr><![endif]--\x3e"),a.browser["ie"+c]=Boolean(n.length&&1===n[0].nodeType);e=a.browser;for(c in e)e[c]&&"name"!==c&&(e.name=c);a.browser.name||(a.browser.name="otherBrowser",a.browser.otherBrowser=!0)}if(!a.attribute||h.option&&(h.option.attribute||h.option.userAgent))a.attribute={name:"",touch:-1<
b.indexOf("touch")||a.hardware.tablet||a.platform.iphone||a.platform.ipad||a.platform.android&&a.hardware.mobile,bot:/Bot\W|Robot|Crawler|Spider/i.test(b)};if((!a.font||h.option&&(h.option.font||h.option.userAgent))&&h.font&&d("body").length){var k,g;b=["monospace","fantasy","cursive","sans-serif","serif"];e="font-size: 72px !important; font-style: normal !important; font-weight: normal !important; font-variant: normal !important; letter-spacing: normal !important; line-height: normal !important; display: block !important; visibility: hidden !important; position: absolute !important; top: -9999px !important; left: -9999px !important; width: auto !important; height: auto !important; ";
c=h.font.symbol?"_!#$&:;@+-*/%=^\\(){}[]<>":"";g={en:"environment",ja:"\u74b0\u5883\u3000\u304b\u3093\u304d\u3087\u3046\u3000\u30ab\u30f3\u30ad\u30e7\u30a6"};n="alphanumericmmmmmmmmm1234567890"+c;c=0;k=h.font.lang.split(/\s*,\s*/);for(var f;f=k[c];c++)f in g&&(n+=g[f]);g=[];g[0]=d("<pre/>").text(n);g[1]=d("<pre/>").text(n);k=d("body");k.append(g[0],g[1]);for(c=0;c+1<b.length;c++)g[0].attr("style","font-family: "+b.slice(c+0).join(", ")+" !important; "+e),g[1].attr("style","font-family: "+b.slice(c+
1).join(", ")+" !important; "+e),g[0][0].offsetWidth===g[1][0].offsetWidth&&g[0][0].offsetHeight===g[1][0].offsetHeight&&b.splice(c--,1);g[0].attr("style","font-family: "+b.join(", ")+" !important; "+e);g[1].attr("style","font-family: "+b.slice(1<b.length?1:0).join(", ")+" !important; "+e);e=b.join(", ")+" !important; "+e;b=h.font.family.split(/\s*,\s*/);a.font={support:"",support4style:"",notsupport:"",notsupport4style:""};n=d("<pre/>").text(n);k.append(n);for(c=0;k=b[c];c++){h=k.replace(/"|'/g,
"");f=0;for(var l=g.length,m;m=g[f];f++)if(n.attr("style","font-family: "+k+", "+e.slice(f?e.indexOf(", ")+2:0)),m[0].offsetWidth!==n[0].offsetWidth||m[0].offsetHeight!==n[0].offsetHeight||a.os.androidos||a.os.ios){a.font[h]=!0;a.font.support+=","+h;a.font.support4style+=","+k;break}else f===l-1&&(a.font[h]=!1,a.font.notsupport+=","+h,a.font.notsupport4style+=","+k)}g[0].remove();g[0]=null;g[1].remove();g[1]=null;n.remove();a.font.support=a.font.support.slice(1);a.font.notsupport=a.font.notsupport.slice(1);
a.font.support4style=a.font.support4style.slice(1);a.font.notsupport4style=a.font.notsupport4style.slice(1);a.font.name=a.font.support.split(/\s*,\s*/,2)[0]}a.support&&(a.support=d.support);d.extend(!0,this,a)},format:function(d,a){if(d in this&&a)a=(a=a?a.replace(/(\S+):(\S+)/,"$2-$1"):a)?a.replace(/(\w+)-(not-)/,"$2-$1"):a;else if(!(d in this)){d=(d=d?d.replace(/(\S+):(\S+)/,"$2-$1"):d)?d.replace(/(\w+)-(not-)/,"$2-$1"):d;a=d.split(/(?:not|lte|lt|gte|gt)-/).pop();for(var b in this)"object"===typeof this[b]&&
a in this[b]&&(a=d,d=b)}return[d,a]},reference:function(d,a){var b,f,e=[m,m];b=a===m?[a]:a.replace(/(not|)-?(lte|lt|gte|gt|)-?(\S+)/,"$3,$2,$1").split(",");b[2]="not"===b[2]?!1:!0;switch(!0){case !a||0>a.indexOf("-"):return a=a?a:"name",f=this[d]&&a in this[d]?this[d][a]:m,b[2]?f:!f;case "os"===d&&!b[0].indexOf("windows"):f="windows8 windowsRT windows7 windowsVista windowsServer2003 windowsXP windowsME windows2000 windows98 windowsNT windows95".split(" ");break;case "os"===d&&!b[0].indexOf("osx"):f=
"osx10.8 osx10.7 osx10.6 osx10.5 osx10.4 osx10.3 osx10.2 osx10.1 osx10.0".split(" ");break;case "browser"===d&&!b[0].indexOf("ie"):f="ie15 ie14 ie13 ie12 ie11 ie10 ie9 ie8 ie7 ie6 ie5".split(" ");break;default:return m}for(var h=0,c;c=f[h];h++)this[d].name===c&&(e[0]=h),b[0]===c&&(e[1]=h);if(m in e)return m;switch(b[1]){case "gt":f=e[0]<e[1];break;case "gte":f=e[0]<=e[1];break;case "lt":f=e[0]>e[1];break;case "lte":f=e[0]>=e[1];break;default:return m}return b[2]?f:!f}};(function(d,a,b,f,e){d.fn[e.name]=
d[e.name]=function(){return s.apply(this,[d,a,b,f,e].concat([].slice.call(arguments)))};e.setProperties.call(d[e.name])}).apply(this,[].slice.call(arguments).concat([f]))})(jQuery,window,document,void 0);
